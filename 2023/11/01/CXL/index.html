<!DOCTYPE html><html lang="zh-cn" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CXL | might's room</title><meta name="author" content="might"><meta name="copyright" content="might"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="CXL简介：CXL论文 Panmnesia2023-09-18 CXL-SSDHello bytes, bye blocks | Proceedings of the 14th ACM Workshop on Hot Topics in Storage and File Systems An Introduction to the Compute Express LinkTM (CXLTM) In">
<meta property="og:type" content="article">
<meta property="og:title" content="CXL">
<meta property="og:url" content="https://mightcoder.com/2023/11/01/CXL/index.html">
<meta property="og:site_name" content="might&#39;s room">
<meta property="og:description" content="CXL简介：CXL论文 Panmnesia2023-09-18 CXL-SSDHello bytes, bye blocks | Proceedings of the 14th ACM Workshop on Hot Topics in Storage and File Systems An Introduction to the Compute Express LinkTM (CXLTM) In">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.ytimg.com/vi/6TRbkes15Ok/maxresdefault.jpg">
<meta property="article:published_time" content="2023-11-01T12:31:37.000Z">
<meta property="article:modified_time" content="2023-11-01T12:31:33.373Z">
<meta property="article:author" content="might">
<meta property="article:tag" content="cxl">
<meta property="article:tag" content="存储">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.ytimg.com/vi/6TRbkes15Ok/maxresdefault.jpg"><link rel="shortcut icon" href="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/OK.jpg"><link rel="canonical" href="https://mightcoder.com/2023/11/01/CXL/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//static.cloudflareinsights.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;60e2c80ac4524b11b7168fad4fb0548b&quot;}"></script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CXL',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-01 20:31:33'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 8 || hour >= 22
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="might's room" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/OK.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('https://i.ytimg.com/vi/6TRbkes15Ok/maxresdefault.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="might's room"><span class="site-name">might's room</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">CXL</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-01T12:31:37.000Z" title="Created 2023-11-01 20:31:37">2023-11-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-11-01T12:31:33.373Z" title="Updated 2023-11-01 20:31:33">2023-11-01</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word Count:</span><span class="word-count">4.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading Time:</span><span>13mins</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CXL"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="CXL简介："><a href="#CXL简介：" class="headerlink" title="CXL简介："></a>CXL简介：</h1><p><a href="../%E6%96%B9%E5%90%91%E5%AD%A6%E4%B9%A0/cxl/CXL%E8%AE%BA%E6%96%87.md#%5Ea4c00f">CXL论文</a></p>
<p>Panmnesia<br><a href="../%E6%97%A5%E8%AE%B0/2023-09-18.md#%5E3471f6">2023-09-18</a></p>
<p>CXL-SSD<br><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/abs/10.1145/3538643.3539745">Hello bytes, bye blocks | Proceedings of the 14th ACM Workshop on Hot Topics in Storage and File Systems</a></p>
<h1 id="An-Introduction-to-the-Compute-Express-LinkTM-CXLTM-Interconnect"><a href="#An-Introduction-to-the-Compute-Express-LinkTM-CXLTM-Interconnect" class="headerlink" title="An Introduction to the Compute Express LinkTM (CXLTM) Interconnect"></a>An Introduction to the Compute Express LinkTM (CXLTM) Interconnect</h1><h2 id="INTRODUCTION"><a href="#INTRODUCTION" class="headerlink" title="INTRODUCTION"></a>INTRODUCTION</h2><p>没有CXL的PCIe连接存在的挑战：</p>
<ol>
<li>无法实现对系统和设备内存的一致性访问，设备内存无法映射到可缓存的系统地址空间<br>（有没有人做基于CXL的CPUGPU统一地址空间？）</li>
<li>内存可拓展性差：PCIe带宽不错，但是不支持一致性的内存空间，所以无法直接做内存拓展</li>
<li>由于资源闲置导致的内存和计算资源的浪费</li>
<li>分布式系统经常细粒度同步，通信延迟高导致需要数据共享</li>
</ol>
<p>CXL能做的<br>缓存一致性、可拓容、内存池、共享内存</p>
<h2 id="CXL1-1"><a href="#CXL1-1" class="headerlink" title="CXL1.1"></a>CXL1.1</h2><h3 id="CXL-68-byte-Flit"><a href="#CXL-68-byte-Flit" class="headerlink" title="CXL 68 byte Flit"></a>CXL 68 byte Flit</h3><p>CXL协议的传输单元：Flit (FlowControl Unit).1.0 1.1 2.0是68字节，3.0引入了256字节<br>2字节协议ID，64字节负载，2字节的CRC<br>协议 ID 描述了不同类型的数据包，并具有内置冗余来检测和纠正这 2 个字节内的多个位翻转。<br><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/20230920164915.png" alt="image.png"></p>
<h3 id="CXL-IO-protocol"><a href="#CXL-IO-protocol" class="headerlink" title="CXL IO protocol"></a>CXL IO protocol</h3><p>描述了IO协议定义的事务顺序</p>
<h3 id="CXL-cache-protocol"><a href="#CXL-cache-protocol" class="headerlink" title="CXL cache protocol"></a>CXL cache protocol</h3><p>host管理一致性，由H2D请求来改变设备的状态，这种请求叫snooping(snp)</p>
<p>CXL cache使设备能缓存主机内存，cache line是64字节,MESI协议。host管理所有peer cache的一致性而设备不交互。<br>两个方向三个通道 H2D D2H 请求、响应、数据通道。流通道可以独立地在每个方向上进行数据传输，但有一个例外情况：当主机在H2D请求通道中发送一个Snoop消息时，必须在H2D响应通道中推送一个先前的全局观察（GO）消息，用于同一个缓存行地址。GO消息向设备指示一致性协议和一致性承诺点<br>设备使用的是主机的物理地址，设备需要实现设备快表DTLB来缓存页表，使用PCIe(CXL io)的之地转换服务(ATS)来获取虚拟到物理的转换以及访问控制。DTLB是非一致的，所以需要主机跟踪DTLB中挂起的条码，并发起无效操作</p>
<blockquote>
<p>PCIe的ATS代表Address Translation Services（地址转换服务）。ATS是PCIe规范中引入的一项功能，用于提高虚拟化环境中设备的性能和可扩展性。<br>在传统的PCIe架构中，设备通过物理地址进行内存访问。然而，在虚拟化环境中，多个虚拟机共享同一个物理设备时，每个虚拟机可能拥有自己的虚拟地址空间。这就需要一种机制来进行物理地址到虚拟地址的转换，以确保每个虚拟机都可以正确地访问其分配的内存。<br>ATS提供了这种地址转换的服务。当设备支持ATS时，它可以向系统报告其支持的地址转换功能。主机通过ATS命令将虚拟地址发送给设备，并由设备执行地址转换，将虚拟地址映射到物理地址。这样，每个虚拟机都可以独立地进行内存访问，而不会干扰其他虚拟机或主机系统。<br>通过使用ATS，虚拟化环境中的设备可以更高效地进行内存访问，减少了主机系统的干预，提高了设备性能和整体系统的可扩展性。它为虚拟化环境中的设备提供了更好的隔离性和灵活性。</p>
</blockquote>
<h4 id="D2H-请求"><a href="#D2H-请求" class="headerlink" title="D2H 请求"></a>D2H 请求</h4><p>15个命令分为四类：Read,Read0,Read0-Write,Write</p>
<ul>
<li>Read:设备请求一致性状态和数据。 得到的响应是H2D 的response中的一致性状态和H2D数据</li>
<li>Read0:仅请求0数据(地址无效或者未分配)，意味着不需要数据。作用是升级缓存中的现有数据(S-&gt;E)或在预计写入整个缓存行时进入 E 状态。得到的响应是一致性状态</li>
<li>Read0-Write:直接将数据写入主机，无需在发出前有任何一致性状态。当主机准备好接受 D2H 数据时，H2D 响应将指示“WritePull”，并且主机将在指示系统“全局观察”(GO) 数据之前解决一致性问题。</li>
<li>Write：用于设备从设备缓存中逐出数据。这些请求可以针对脏数据（M 状态）或干净数据（E 或 S 状态）。当设备需要提供数据时，主机会指示“WritePull”，并指示 GO</li>
</ul>
<h4 id="H2D请求"><a href="#H2D请求" class="headerlink" title="H2D请求"></a>H2D请求</h4><p>H2D请求用于主机改变设备中的一致性状态，这种请求被称为Snooping（snp）。设备根据snp的要求更新缓存，并在缓存状态为M时将数据写回主机</p>
<p>一致性协议的一个关键组成部分是它如何处理同一地址的冲突访问。有两种情况需要重点强调：(1) 请求到窥探，以及 (2) 驱逐到窥探。对于设备的 Req-to-Snoop 确定如何响应，H2D 响应通道上的 GO 消息必须排在任何未来到相同缓存行地址的 Snoop 之前。其原因如图 8A 所示，其中必须在稍后的侦听之前观察从主机发送的 GO 消息，以便设备知道它具有该地址的独占所有权并可以正确处理侦听。图 8B 是相反顺序的情况，其中主机首先处理探听，并将停止未来的请求，直到探听完成，因此设备在 GO 之前观察探听会导致在缓存处于无效状态时处理探听。对于 Evict-to-Snoop，图 8C 显示了当 DirtyEvict 未完成时监听到达的情况，并且设备必须使用当前 M 状态数据回复监听。稍后的 GO_WritePull 仍必须返回数据，但包括数据是伪造的（意味着可能已过时）的指示，因此主机必须删除数据，因为其他代理中可能存在更新的数据。</p>
<h3 id="CXL-mem-Protocol"><a href="#CXL-mem-Protocol" class="headerlink" title="CXL mem Protocol"></a>CXL mem Protocol</h3><p>mem协议允许设备暴露Host-managed Device Memory(HDM)。允许主机像访问DDR一样访问HDM。mem协议独立于所使用的介质，使用一组简单的读取和写入主机物理地址，要求设备在内部转换为设备的介质地址空间。对于还希望缓存该内存的加速器设备，提供了高级语义以使设备能够直接缓存该内存，依赖于该设备来跟踪该内存的主机缓存。</p>
<p>两个方向，两个通道：Master-to-Subordinate (M2S) and Subordinate-toMaster (S2M).<br>M2S提供Request channel,Request-with-Data(RwD) channel.S2M 提供Non-Data-Response (NDR) channel and Data-ReSponse (DRS) channel.为了实现简单&#x2F;低延迟的实现，通道之间没有顺序。</p>
<p>mem的两个用途：主机内存拓展、暴露给主机的加速器内存。为了区分，使用不同的修饰符表示，HDM-H表示host-only coherent，不包含一致性协议，用于type3设备，HDM-D表示Device-managed coherent， 包含缓存状态和缓存监听属性，用于type2设备。HDM-D 还需要一种将存储器的所需缓存状态从设备传输到主机的方法，称为“偏置翻转”流</p>
<p>HDM-H 可选择为每个缓存行提供 2 位meta value以供主机使用。没看出在这有啥用，应该是后面版本一致性问题用到的</p>
<p>HDM-D 一致性模型允许设备使用 CXL.cache 请求更改主机的状态来实现此目的。 CXL.cache 是执行此操作的自然方法，因为 HDM-D 仅针对 Type-2 设备定义，以便可以使用 CXL.cache 协议。<br>具体来说就是H2S的snp指明主机一致性状态，rsp更新主机的一致性状态</p>
<p>Device Coherence (Dcoh) agent：描述设备中的代理管理&#x2F;跟踪设备和主机的一致性</p>
<h3 id="协议层次"><a href="#协议层次" class="headerlink" title="协议层次"></a>协议层次</h3><p><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/20231024172417.png" alt="image.png"></p>
<p>cache协议是device如图cpu的core一样，都连接在LLC上，mem协议在home agent之后，CPU通过mem协议访问HDM如图访问DRAM一样。</p>
<p>home agent解决主机间的缓存一致性问题（被BI替代）</p>
<h2 id="CXL2-0"><a href="#CXL2-0" class="headerlink" title="CXL2.0"></a>CXL2.0</h2><p>特点：支持池化，在运行时重新分配资源、单层switch、QoS、热插拔、全局持久刷新(GPF)</p>
<p>为了支持switch，每个主机将 CXL 拓扑表示为虚拟层次结构 (VH)，包括主机端口的交换机和虚拟网桥以及具有设备资源的每个端口，每个主机都会看到一个单独的 VCS（虚拟 CXL 交换机）其中包括分配给该主机的设备的网桥，这将 CXL 2.0 限制为有向树拓扑，每个主机和设备之间最多有一条路径。此外，跟踪交换机中每个 VH 地址映射的需要限制了单交换机级别的可扩展性，CXL 3.0 克服了这一限制（第 5.3 节）。</p>
<p>SLD:一个设备分配给一个主机<br>MLD:一个设备分配给多个主机<br>MLD中的逻辑设备LD由标识符 (LD-ID) 标识。此扩展仅在交换机和设备之间的链路上可见，对主机不可见。主机将 LD-ID 字段留空。 CXL 交换机根据主机的端口将 LD-ID 标签应用于主机的 CXL.io 和 CXL.mem 事务。</p>
<p>switch的存在会带来服务质量问题，比如一台设备的低性能可能会导致使用该交换机的所有代理发生拥塞。为了缓解此问题，CXL 2.0 在 CXL.mem 响应消息中引入了 DevLoad 字段，以通知主机在其正在访问的设备中观察到的负载。主机应使用此负载信息来降低向该设备发送 CXL 请求的速率。 CXL 规范定义了一个参考模型，以便在高负载或临界负载时降低注入速率，直到达到标称负载，而在轻负载时，主机可以增加注入速率，直到达到标称负载。</p>
<h3 id="池管理"><a href="#池管理" class="headerlink" title="池管理"></a>池管理</h3><p>CXL Fabric Manager (FM) 来进行管理，FM是逻辑概念，可以是在主机上运行的软件、嵌入底板管理控制器 (BMC) 或 CXL 交换机内的固件，或者是专用设备。</p>
<p>主机的设备分配由 FM 通过 bind 命令完成，该命令采用四个参数：CXL 交换机 ID、虚拟网桥 ID、物理端口 ID 和逻辑设备 ID（对于 SLD 为空）。FM 将此命令发送到指定的交换机，该交换机检查该物理端口当前是否未绑定。如果未绑定，交换机会更新其内部状态以执行绑定。然后向主机发送热添加指示，最后通知 FM 绑定成功。虚拟网桥和关联设备现在出现在主机的虚拟层次结构中。</p>
<p>对于 MLD，FM 可能需要首先通过 Set-LD 命令配置逻辑设备。。创建LD后，FM可以使用bind命令和相应的LD-ID将它们分配给主机。要撤消设备分配，FM 使用 unbind 命令，该命令采用三个参数：CXL 交换机 ID、虚拟网桥 ID 和取消绑定选项。 </p>
<p>除了此处描述的三个命令之外，FM 还支持其他 19 个命令。它们包括 QoS 控制，例如 MLD 内逻辑设备之间的带宽分配。这些命令还包括识别交换机端口和设备以及查询和配置其状态的方法</p>
<h3 id="主机软件支持"><a href="#主机软件支持" class="headerlink" title="主机软件支持"></a>主机软件支持</h3><p>尽管 CXL 的大部分是在主机外部的硬件和软件（例如 FM）中实现的，但主机软件在支持 CXL 方面发挥着重要作用。在较高级别上，系统固件枚举并配置启动时存在的 CXL 资源。操作系统 (OS) 枚举并配置在运行时附加和分离的 CXL 资源，例如热添加和热删除的内存地址范围。因此，操作系统在支持 CXL 2.0 方面发挥着重要作用。<br>CXL 2.0 引入了一致设备属性表 (CDAT)，它描述了内部 NUMA 域、内存范围、带宽、延迟和内存使用建议 [47, 48]。当在运行时热添加内存（逻辑）设备时，主机读取关联的 CDAT 寄存器，操作系统分配空闲的 HPA 范围并对 HDM 解码器进行编程。</p>
<h2 id="CXL-3-0"><a href="#CXL-3-0" class="headerlink" title="CXL 3.0"></a>CXL 3.0</h2><p>特点</p>
<ul>
<li>拓展了内存池化，更多的设备，更大的flit，低延迟大带宽</li>
<li>多级switch，支持网状拓扑，这可实现更低的延迟、更高的二等分带宽和故障转移功能</li>
<li>支持点对点访问HDM，不涉及host</li>
<li>跨主机共享一致性内存和消息传递</li>
<li>近内存处理允许在内存附近执行计算，以获得更好的性能和能耗。</li>
</ul>
<h3 id="支持64GT-s的Flit"><a href="#支持64GT-s的Flit" class="headerlink" title="支持64GT&#x2F;s的Flit"></a>支持64GT&#x2F;s的Flit</h3><p>3.0拓展了Flit的格式，使其变为256B，支持PCIe6.0的64GT&#x2F;s速率<br>任何设备都支持32GT&#x2F;s的速率，如果 CXL 设备支持 64.0 GT&#x2F;s 数据速率，则它还必须通告 256B Flit 模式</p>
<h3 id="点对点通信和映射大块本地内存"><a href="#点对点通信和映射大块本地内存" class="headerlink" title="点对点通信和映射大块本地内存"></a>点对点通信和映射大块本地内存</h3><p>实现原理：Unordered I&#x2F;O(UIO)和Back-Invalidation(BI)</p>
<p>由于PCIe Ordering规则的限制，只允许存在非树形拓扑结构，也就是说在任意两个节点（主机或设备）之间只存在一条路径。<br>CXL 3.0（以及PCIe）通过在一个或多个独立的虚拟通道（VCs）上引入”unordered”读&#x2F;写&#x2F;完成事务，并将顺序强制转移到源节点来解决了这个挑战</p>
<p>CXL 3.0 在 CXL.mem 中引入了带有两个新通道：S2M方向的Back-Invalidate (BI)，M2S方向的BI-Rsp。实现了三种用途：</p>
<ol>
<li>通过 CXL.io UIO 访问 HDM-DB 内存的 CXL&#x2F;PCIe 设备之间的直接对等通信（如图 17 所示）</li>
<li>Type-2 设备实现监听的能力-过滤大块本地内存并将其映射到HDM-DB区域（如图18a所示）</li>
<li>以及跨多个独立主机的硬件强制一致共享内存（图18b）。</li>
</ol>
<p>在 CXL.mem 中包含 BI 的理由是确保不存在避免死锁所需的其他依赖项</p>
<h4 id="点对点通信"><a href="#点对点通信" class="headerlink" title="点对点通信"></a>点对点通信</h4><p>如果是CXL2.0，当与switch连接的device需要访问HDM-D的内存，休要经过host，这包括主机从内存中获取数据并在完成访问之前解决一致性流程。</p>
<p>在CXL 3.0流程中（图17c），设备可以直接使用UIO VC中的CXl.io发送相同的内存读写事务。开关不会将这些UIO事务路由到主机。在某些缓存行状态下，UIO事务可以直接从内存中服务。</p>
<p><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/20231024154103.png" alt="image.png"></p>
<ul>
<li>如果UIO读取的缓存行状态为I（无效）或S（共享），或者UIO写入的状态为I，那么UIO事务将直接从内存服务。</li>
<li>如有需要，内存控制器会使用BI流程进行反向监控主机处理器。这比传统方法更具带宽效率，传统方法是将所有请求发送到主机，导致更多的流量和额外的延迟。</li>
</ul>
<h4 id="设备监听能力"><a href="#设备监听能力" class="headerlink" title="设备监听能力"></a>设备监听能力</h4><h4 id="跨host缓存一致性"><a href="#跨host缓存一致性" class="headerlink" title="跨host缓存一致性"></a>跨host缓存一致性</h4><p>BI机制还能够实现跨多个主机的共享和硬件强制的一致性内存，如图18b所示。在这里，内存设备（GFD&#x2F;MLD）维护一个目录（或Snoop Filter），以跟踪一致性共享内存中缓存行的所有权。因此，当Host 1以共享副本的形式获取缓存行X的所有权时，它将目录从“I”状态更新为“S”状态，并将Host 1标记为共享者。当Host 3以相同的共享状态请求相同的缓存行X时，它提供数据并更新X的目录以指示Host 1和Host 3都已共享。当Host 4请求独占副本时，它向Host 1和Host 3发出Back Invalidate，等待两者的响应以确保Host 1和Host 3已失效其对X的副本，并在发送数据和所有权给Host 4之前，将其目录更新为Host 4标记的“E”状态。这个内存设备可以是多逻辑设备（MLD）或GFD设<br><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/20231024154852.png" alt="image.png"></p>
<h3 id="Port-Base-Routing-PBR-基于端口的路由"><a href="#Port-Base-Routing-PBR-基于端口的路由" class="headerlink" title="Port Base Routing (PBR) 基于端口的路由"></a>Port Base Routing (PBR) 基于端口的路由</h3><p>目的：能够拓展到4096的端点和非树网络拓扑</p>
<p>分层路由要求交换机了解每个主机的虚拟分层结构和地址映射。CXL 3.0 继续对大多数端点和第一台交换机之间的链路使用标准 CXL 2.0 消息，连接到设备或主机的第一个交换机端口称为“边缘端口”，因为它在标准消息 (HBR) 和 PBR 消息之间转换方面具有特殊作用。 </p>
<p>然后详细介绍了这个算法的具体内容</p>
<h1 id="CXL-缓存一致性"><a href="#CXL-缓存一致性" class="headerlink" title="CXL 缓存一致性"></a>CXL 缓存一致性</h1><p>ex1<br>多个host共享访问内存，其中一个host独占请求<br>其他host正常请求响应，独占请求的host需要DOCH发BIreq，然后其他host无效化，再返回BIres，这个开销是额外的开销</p>
<p>ex2<br>多个host共享访问内存，当一个host独占请求，且该内容已经被修改，需要修改的host flush回cxlmem 再返回独占host</p>
<p>ex3<br>无cache访问，类似stream_load</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://mightcoder.com">might</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://mightcoder.com/2023/11/01/CXL/">https://mightcoder.com/2023/11/01/CXL/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cxl/">cxl</a><a class="post-meta__tags" href="/tags/%E5%AD%98%E5%82%A8/">存储</a></div><div class="post_share"><div class="social-share" data-image="https://i.ytimg.com/vi/6TRbkes15Ok/maxresdefault.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>请作者喝杯咖啡</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/mm_facetoface_collect_qrcode_1701260520030.png" target="_blank"><img class="post-qr-code-img" src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/mm_facetoface_collect_qrcode_1701260520030.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/1701260528369.jpg" target="_blank"><img class="post-qr-code-img" src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/1701260528369.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/02/effective%20modern%20c++/" title="effective modern c++"><img class="cover" src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/20231101213331.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">effective modern c++</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/25/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/" title="性能优化技巧总结"><img class="cover" src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/202208092121258.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next</div><div class="next_info">性能优化技巧总结</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/OK.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">might</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/shenghansen"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/shenghansen" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:shenghs@mail2.sysu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="/./atom.xml" target="_blank" title="RSS"><i class="fas fa-rss" style="color: #f36d6d;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Hope you can find something useful here ᐕ)⁾⁾ .</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CXL%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">CXL简介：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#An-Introduction-to-the-Compute-Express-LinkTM-CXLTM-Interconnect"><span class="toc-number">2.</span> <span class="toc-text">An Introduction to the Compute Express LinkTM (CXLTM) Interconnect</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#INTRODUCTION"><span class="toc-number">2.1.</span> <span class="toc-text">INTRODUCTION</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CXL1-1"><span class="toc-number">2.2.</span> <span class="toc-text">CXL1.1</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CXL-68-byte-Flit"><span class="toc-number">2.2.1.</span> <span class="toc-text">CXL 68 byte Flit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CXL-IO-protocol"><span class="toc-number">2.2.2.</span> <span class="toc-text">CXL IO protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CXL-cache-protocol"><span class="toc-number">2.2.3.</span> <span class="toc-text">CXL cache protocol</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#D2H-%E8%AF%B7%E6%B1%82"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">D2H 请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#H2D%E8%AF%B7%E6%B1%82"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">H2D请求</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CXL-mem-Protocol"><span class="toc-number">2.2.4.</span> <span class="toc-text">CXL mem Protocol</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%B1%82%E6%AC%A1"><span class="toc-number">2.2.5.</span> <span class="toc-text">协议层次</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CXL2-0"><span class="toc-number">2.3.</span> <span class="toc-text">CXL2.0</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%A0%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.1.</span> <span class="toc-text">池管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E6%9C%BA%E8%BD%AF%E4%BB%B6%E6%94%AF%E6%8C%81"><span class="toc-number">2.3.2.</span> <span class="toc-text">主机软件支持</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CXL-3-0"><span class="toc-number">2.4.</span> <span class="toc-text">CXL 3.0</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%AF%E6%8C%8164GT-s%E7%9A%84Flit"><span class="toc-number">2.4.1.</span> <span class="toc-text">支持64GT&#x2F;s的Flit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E9%80%9A%E4%BF%A1%E5%92%8C%E6%98%A0%E5%B0%84%E5%A4%A7%E5%9D%97%E6%9C%AC%E5%9C%B0%E5%86%85%E5%AD%98"><span class="toc-number">2.4.2.</span> <span class="toc-text">点对点通信和映射大块本地内存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9%E9%80%9A%E4%BF%A1"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">点对点通信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E5%A4%87%E7%9B%91%E5%90%AC%E8%83%BD%E5%8A%9B"><span class="toc-number">2.4.2.2.</span> <span class="toc-text">设备监听能力</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%A8host%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">2.4.2.3.</span> <span class="toc-text">跨host缓存一致性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Port-Base-Routing-PBR-%E5%9F%BA%E4%BA%8E%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%B7%AF%E7%94%B1"><span class="toc-number">2.4.3.</span> <span class="toc-text">Port Base Routing (PBR) 基于端口的路由</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CXL-%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text">CXL 缓存一致性</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/11/02/effective%20modern%20c++/" title="effective modern c++"><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/20231101213331.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="effective modern c++"/></a><div class="content"><a class="title" href="/2023/11/02/effective%20modern%20c++/" title="effective modern c++">effective modern c++</a><time datetime="2023-11-02T13:01:37.000Z" title="Created 2023-11-02 21:01:37">2023-11-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/01/CXL/" title="CXL"><img src="https://i.ytimg.com/vi/6TRbkes15Ok/maxresdefault.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CXL"/></a><div class="content"><a class="title" href="/2023/11/01/CXL/" title="CXL">CXL</a><time datetime="2023-11-01T12:31:37.000Z" title="Created 2023-11-01 20:31:37">2023-11-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/25/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/" title="性能优化技巧总结"><img src="https://might-image-bed.oss-cn-hangzhou.aliyuncs.com/imgbed/202208092121258.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="性能优化技巧总结"/></a><div class="content"><a class="title" href="/2023/10/25/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/" title="性能优化技巧总结">性能优化技巧总结</a><time datetime="2023-10-25T13:01:37.000Z" title="Created 2023-10-25 21:01:37">2023-10-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/28/cmake/" title="Cmake"><img src="data:image/jpeg;base64,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" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cmake"/></a><div class="content"><a class="title" href="/2023/05/28/cmake/" title="Cmake">Cmake</a><time datetime="2023-05-28T13:39:37.000Z" title="Created 2023-05-28 21:39:37">2023-05-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/28/open%20mlsys/" title="open mlsys"><img src="https://openmlsys.github.io/_images/logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="open mlsys"/></a><div class="content"><a class="title" href="/2023/05/28/open%20mlsys/" title="open mlsys">open mlsys</a><time datetime="2023-05-28T13:39:37.000Z" title="Created 2023-05-28 21:39:37">2023-05-28</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.ytimg.com/vi/6TRbkes15Ok/maxresdefault.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By might</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">hope you can find something useful here ᐕ)⁾⁾ .</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'VBvzA6UUhphh1Tc1BtzWXzye-gzGzoHsz',
      appKey: 'J0UlGcCok0khsrORkwxD1HwF',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>